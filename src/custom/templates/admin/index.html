{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
  <div class="py-4">
    <div class="dropdown">
      <div class="dropdown-menu dashboard-dropdown dropdown-menu-start mt-2 py-1">
        <a class="dropdown-item d-flex align-items-center" href="#">
          <svg class="dropdown-icon text-gray-400 me-2" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z">
            </path>
          </svg>
          Add User
        </a>
        <a class="dropdown-item d-flex align-items-center" href="#">
          <svg class="dropdown-icon text-gray-400 me-2" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z">
            </path>
          </svg>
          Add Widget
        </a>
        <a class="dropdown-item d-flex align-items-center" href="#">
          <svg class="dropdown-icon text-gray-400 me-2" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z">
            </path>
            <path d="M9 13h2v5a1 1 0 11-2 0v-5z"></path>
          </svg>
          Upload Files
        </a>
        <a class="dropdown-item d-flex align-items-center" href="#">
          <svg class="dropdown-icon text-gray-400 me-2" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
              d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"></path>
          </svg>
          Preview Security
        </a>
        <div role="separator" class="dropdown-divider my-1"></div>
        <a class="dropdown-item d-flex align-items-center" href="#">
          <svg class="dropdown-icon text-danger me-2" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
              d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
              clip-rule="evenodd"></path>
          </svg>
          Upgrade to Pro
        </a>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 mb-4">
      <div class="card bg-yellow-100 border-0 shadow">
        <div class="card-header d-sm-flex flex-row align-items-center flex-0">
          <div class="d-block mb-3 mb-sm-0">
            <div class="fs-5 fw-normal mb-2">فعالیت</div>
            <h2 class="fs-3 fw-extrabold">$10,567</h2>
            <div class="small mt-2">
              <span class="fw-normal me-2">Yesterday</span>
              <span class="fas fa-angle-up text-success"></span>
              <span class="text-success fw-bold">10.57%</span>
            </div>
          </div>
          <div class="d-flex ms-auto">
            <a href="#" class="btn btn-secondary text-dark btn-sm me-2">Month</a>
            <a href="#" class="btn btn-dark btn-sm me-3">Week</a>
          </div>
        </div>
        <div class="card-body p-2">
          <div class="ct-chart-sales-value ct-double-octave ct-series-g"></div>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
      <div class="card border-0 shadow">
        <div class="card-body">
          <div class="row d-block d-xl-flex align-items-center">
            <div
              class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
              <div class="icon-shape icon-shape-success rounded me-4 me-sm-0">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M144 160c-44.2 0-80-35.8-80-80S99.8 0 144 0s80 35.8 80 80s-35.8 80-80 80zm368 0c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM416 224c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"/></svg>
              </div>
            </div>
            <div class="col-12 col-xl-7 px-xl-0">
              <div class="d-none d-sm-block">
                <h3 class="h4 mb-2">کاربران</h3>
                <h5 class="bold-font mb-3">{{ users_count }}</h5>
              </div>
              <div class="small d-flex mt-1">
                <div class="d-flex align-items-center">
                  <div class="d-flex align-items-center">
                    <span class="text-success bold-font increase-num">{{ users_last_month }}</span>
                    <svg class="icon icon-xs text-success" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                      d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                      clip-rule="evenodd"></path>
                    </svg>
                  </div>
                  <span class="me-2">در یک ماه اخیر</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
      <div class="card border-0 shadow">
        <div class="card-body">
          <div class="row d-block d-xl-flex align-items-center">
            <div
              class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
              <div class="custom-icon-shape icon-shape-gray rounded me-4 me-sm-0">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.0.0-alpha3 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M447.1 32h-384C28.64 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM111.1 96c26.51 0 48 21.49 48 48S138.5 192 111.1 192s-48-21.49-48-48S85.48 96 111.1 96zM446.1 407.6C443.3 412.8 437.9 416 432 416H82.01c-6.021 0-11.53-3.379-14.26-8.75c-2.73-5.367-2.215-11.81 1.334-16.68l70-96C142.1 290.4 146.9 288 152 288s9.916 2.441 12.93 6.574l32.46 44.51l93.3-139.1C293.7 194.7 298.7 192 304 192s10.35 2.672 13.31 7.125l128 192C448.6 396 448.9 402.3 446.1 407.6z"/></svg>
              </div>
            </div>
            <div class="col-12 col-xl-7 px-xl-0">
              <div class="d-none d-sm-block">
                <h3 class="h4 mb-2">پست</h3>
                <h5 class="bold-font mb-3">{{ posts_count }}</h5>
              </div>
              <div class="small d-flex mt-1">
                <div class="d-flex align-items-center">
                  <div class="d-flex align-items-center">
                    <span class="text-success bold-font increase-num">{{ posts_last_month }}</span>
                    <svg class="icon icon-xs text-success" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                      d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                      clip-rule="evenodd"></path>
                    </svg>
                  </div>
                  <span class="me-2">در یک ماه اخیر</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
      <div class="card border-0 shadow">
        <div class="card-body">
          <div class="row d-block d-xl-flex align-items-center">
            <div
              class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
              <div class="icon-shape icon-shape-info rounded me-4 me-sm-0">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0-alpha3 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M576 192c35.35 0 64-28.65 64-64c0-35.35-28.65-64-64-64s-64 28.65-64 64C512 163.3 540.7 192 576 192zM576 384c-14.43 0-27.61 4.953-38.31 13.01l-81.9-49.14C460.8 334.1 464 319.5 464 304c0-19.68-4.805-38.11-12.74-54.77l42.93-31.48c10.69-7.812 13-22.84 5.156-33.53c-7.812-10.66-22.81-13.09-33.53-5.156l-42.9 31.46C400.1 189.3 369.7 176 336 176c-10.84 0-21.19 1.752-31.24 4.289l-34-72.86C281.4 96.01 288 80.82 288 64c0-35.35-28.65-64-64-64S160 28.65 160 64c0 35.35 28.65 64 64 64c1.105 0 2.133-.2715 3.225-.3262l33.99 72.84C229.1 223.8 208 261.3 208 304c0 70.69 57.31 128 128 128c37.91 0 71.6-16.79 95.04-42.98l81.95 49.17C512.5 441.4 512 444.6 512 448c0 35.35 28.65 64 64 64S640 483.3 640 448C640 412.7 611.3 384 576 384zM336 384C291.9 384 256 348.1 256 304S291.9 224 336 224C380.1 224 416 259.9 416 304S380.1 384 336 384zM152 280H123.3C113.8 256.6 90.84 240 64 240c-35.35 0-64 28.65-64 64c0 35.35 28.65 64 64 64c26.84 0 49.75-16.56 59.25-40H152c13.25 0 24-10.75 24-24S165.3 280 152 280z"/></svg>
              </div>
            </div>
            <div class="col-12 col-xl-7 px-xl-0">
              <div class="d-none d-sm-block">
                <h3 class="h4 mb-2">ارتباطات</h3>
                <h5 class="bold-font mb-3">{{ contacts_count }}</h5>
              </div>
              <div class="small d-flex mt-1">
                <div class="d-flex align-items-center">
                  <div class="d-flex align-items-center">
                    <span class="text-success bold-font increase-num">{{ contacts_last_month }}</span>
                    <svg class="icon icon-xs text-success" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                      d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                      clip-rule="evenodd"></path>
                  </svg>
                  </div>
                  <span class="me-2">در یک ماه اخیر</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-xl-8">
      <div class="row">
        <div class="col-12 mb-4">
          <div class="card border-0 shadow">
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col">
                  <h2 class="fs-5 fw-bold mb-0">بازدید صفحات</h2>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th class="border-bottom" scope="col">آدرس صفحه</th>
                    <th class="border-bottom" scope="col">تعداد بازدید</th>
                  </tr>
                </thead>
                <tbody>
                  {% for path in path_views %}
                  <tr>
                    <th class="text-gray-900" scope="row">
                      <a target="_blank" href="{{ path.0 }}">{{ path.0 }}</a>
                    </th>
                    <td class="fw-bolder text-gray-500">
                      {{ path.1 }}
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col-12 mb-4">
          <div class="card border-0 shadow">
            <div class="card-header border-bottom d-flex align-items-center justify-content-between">
              <h2 class="fs-5 fw-bold mb-0">افراد تیم</h2>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush list my--3">
                {% for user in staff_users %}
                <li class="list-group-item px-0">
                  <div class="row align-items-center">
                    <div class="col-auto">
                      <!-- Avatar -->
                      <a target="_blank" href="{{ user.get_absolute_url }}" class="avatar">
                        <img class="rounded-circle team-profile" alt="Image placeholder"
                          src="{{ user.profile.photo.url }}">
                      </a>
                    </div>
                    <div class="col-auto ms--2">
                      <h4 class="h6 mb-0">
                        <a target="_blank" href="{{ user.get_absolute_url }}">{% if user.first_name %}{{ user.first_name }}{% else %}{{ user.username }}{% endif %}</a>
                      </h4>
                      <div class="d-flex align-items-center">
                        <small>
                          {% if user.is_superuser %}
                            مدیر
                          {% else %}
                          کارمند
                          {% endif %}
                        </small>
                      </div>
                    </div>
                    <div class="col text-end">
                      <a target="_blank" href="{{ user.get_absolute_url }}" class="btn btn-sm btn-secondary d-inline-flex align-items-center">
                        <svg class="icon icon-xxs ms-2" fill="currentColor" viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd"
                            d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"
                            clip-rule="evenodd"></path>
                        </svg>
                        پیام
                      </a>
                    </div>
                  </div>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
        <div class="col-12 mb-4">
          <div class="card border-0 shadow">
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col">
                  <h2 class="fs-5 fw-bold mb-0">برترین کاربران</h2>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th class="border-bottom" scope="col">کاربر</th>
                    <th class="border-bottom" scope="col">تعداد فالوور</th>
                    <th class="border-bottom" scope="col">تعداد پست</th>
                    <th class="border-bottom" scope="col">مجموع لایک</th>
                  </tr>
                </thead>
                <tbody>
                  {% for username, values in top_users.items %}
                    <tr>
                      <th class="text-gray-900" scope="row">
                        <a target="_blank" href="{% url 'user:detail' username %}">{{ username }}</a>
                      </th>
                      <td class="fw-bolder text-gray-500">
                        {{ values.0 }}
                      </td>
                      <td class="fw-bolder text-gray-500">
                        {{ values.1 }}
                      </td>
                      <td class="fw-bolder text-gray-500">
                        {% if values.2 %}
                          {{ values.2 }}
                        {% else %}
                          0
                        {% endif %} 
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-xl-4">
      <div class="col-12 px-0 mb-4">
        <div class="card border-0 shadow">
          <div class="card-header d-flex flex-row align-items-center flex-0 border-bottom">
            <div class="d-block">
              <div class="h6 fw-normal text-gray mb-2">Total orders</div>
              <h2 class="h3 fw-extrabold">452</h2>
              <div class="small mt-2">
                <span class="fas fa-angle-up text-success"></span>
                <span class="text-success fw-bold">18.2%</span>
              </div>
            </div>
            <div class="d-block ms-auto">
              <div class="d-flex align-items-center text-end mb-2">
                <span class="dot rounded-circle bg-gray-800 me-2"></span>
                <span class="fw-normal small">July</span>
              </div>
              <div class="d-flex align-items-center text-end">
                <span class="dot rounded-circle bg-secondary me-2"></span>
                <span class="fw-normal small">August</span>
              </div>
            </div>
          </div>
          <div class="card-body p-2">
            <div class="ct-chart-ranking ct-golden-section ct-series-a"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}